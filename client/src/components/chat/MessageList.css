.message-list {
  flex: 1;
  height: 100%;
  overflow-y: auto;
  overflow-x: visible;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  background-color: #f8f9fa;
  background-image: url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 500 500'%3E%3Cg fill='none' stroke='%23a0a0a0' stroke-width='1.5' opacity='0.5'%3E%3Cpath d='M151.393,241.139c-4.262-0.895-7.519,1.718-11.358,2.254c-0.208,0.76-0.328,1.555-0.328,2.38c0,4.971,4.029,8.999,8.999,8.999c4.619,0,8.42-3.482,8.935-7.963C156.254,244.141,154.288,241.747,151.393,241.139z'/%3E%3Cpath d='M156.672,245.157c0.016,0.203,0.031,0.407,0.031,0.615c0,4.411-3.588,7.999-7.999,7.999c-4.411,0-7.999-3.588-7.999-7.999c0-0.909,0.16-1.779,0.44-2.594c-0.704,0.167-1.421,0.282-2.165,0.304c-0.173,0.737-0.275,1.501-0.275,2.29c0,5.514,4.485,9.999,9.999,9.999c4.628,0,8.521-3.166,9.655-7.443C157.888,247.24,157.333,246.151,156.672,245.157z'/%3E%3Cpath d='M151.695,246.213c0,2.21-1.2,4.14-2.99,5.18c-1.79-1.03-2.99-2.97-2.99-5.18c0-2.22,1.2-4.15,2.99-5.181C150.495,242.063,151.695,243.993,151.695,246.213z'/%3E%3Cpath d='M131.8,242.923c0.858,0.772,1.997,1.318,3.214,1.536c1.214,0.223,2.479,0.176,3.652-0.03c2.368-0.401,4.501-1.252,6.44-1.905c0.981-0.332,1.863-0.605,2.733-0.722c0.878-0.151,1.722-0.202,2.51-0.122c1.578,0.14,2.956,0.775,4.119,1.712c1.164,0.934,2.088,2.107,2.843,3.212c0.763,1.107,1.346,2.17,1.816,3.058c0.473,0.889,0.822,1.612,1.065,2.105c0.244,0.493,0.375,0.759,0.375,0.759c-0.127-2.343-0.5-4.698-1.371-6.939c-0.834-2.232-2.269-4.395-4.403-5.847c-2.146-1.47-4.865-1.773-7.052-1.396c-1.119,0.145-2.169,0.504-3.081,0.868c-0.909,0.378-1.736,0.779-2.504,1.168c-3.039,1.593-5.439,2.748-7.342,2.887c-0.932,0.081-1.7-0.011-2.216-0.131C132.079,242.997,131.8,242.923,131.8,242.923z'/%3E%3Cpath d='M191.262,235.456c4.013-1.693,7.709,0.248,11.58,0.04c0.349,0.706,0.619,1.463,0.777,2.273c0.951,4.879-2.233,9.604-7.112,10.555c-4.533,0.883-8.93-1.808-10.292-6.107C187.064,239.332,188.536,236.606,191.262,235.456z'/%3E%3Cpath d='M186.848,240.409c0.023,0.203,0.047,0.406,0.087,0.61c0.843,4.33,5.051,7.165,9.38,6.321c4.33-0.843,7.166-5.051,6.322-9.381c-0.174-0.893-0.497-1.716-0.928-2.461c0.723,0.029,1.449,0.005,2.184-0.116c0.311,0.69,0.557,1.421,0.708,2.195c1.054,5.411-2.491,10.672-7.902,11.727c-4.543,0.885-8.97-1.479-10.901-5.46C186.053,242.686,186.39,241.512,186.848,240.409z'/%3E%3Cpath d='M191.936,240.494c0.423,2.169,1.97,3.834,3.926,4.512c1.56-1.354,2.366-3.486,1.944-5.655c-0.424-2.179-1.971-3.845-3.925-4.514C192.32,236.19,191.511,238.315,191.936,240.494z'/%3E%3Cpath d='M210.834,233.46c-2.074,1.133-4.221,1.005-6.27,0.564c-2.068-0.441-4.104-1.152-6.288-1.643c-1.077-0.241-2.265-0.439-3.453-0.402c-1.172,0.002-2.361,0.168-3.473,0.55c-2.258,0.735-4.038,2.362-5.05,4.03c-1.041,1.68-1.5,3.358-1.771,4.813c-0.271,1.462-0.315,2.733-0.313,3.772c0.003,1.038,0.07,1.848,0.122,2.398c0.062,0.549,0.095,0.844,0.095,0.844c0.644-2.261,1.292-4.469,2.161-6.439c0.833-1.985,1.955-3.676,3.282-4.799c1.335-1.117,2.94-1.595,4.617-1.721c1.638-0.17,3.389,0.158,5.097,0.373c1.698,0.233,3.343,0.407,4.828,0.36c1.483-0.044,2.805-0.286,3.8-0.73C210.232,234.55,210.8,233.393,210.834,233.46z'/%3E%3Cpath d='M167.665,265.904c0,0-0.497,2.285,1.987,3.974l4.074,3.478c0,0,1.689,1.987,4.272,0l3.874-4.67c0,0,1.789-2.384,0.398-3.974C182.27,264.712,174.719,261.533,167.665,265.904z'/%3E%3Cpath d='M100.902,231.358c-0.748-3.458-2.353-6.688-4.046-9.774c-1.691-3.096-3.545-6.075-4.917-9.193c-1.322-3.118-2.274-6.396-2.753-9.684c-0.486-3.284-0.567-6.594-0.065-9.717c0.533-3.054,1.545-6.249,3.588-7.938c1.994-1.75,5.024-1.429,7.701-0.485c2.718,0.962,5.257,2.445,7.65,3.959c2.393,1.537,4.644,3.154,6.844,4.706c1.1,0.771,2.196,1.537,3.311,2.229c1.048,0.708,2.073,1.4,3.072,2.075c1.949,1.422,3.78,2.815,5.406,4.242c3.269,2.831,5.944,5.534,7.995,7.899c1.061,1.154,1.943,2.242,2.712,3.189c0.787,0.935,1.427,1.753,1.928,2.432c1.026,1.342,1.575,2.059,1.575,2.059c-3.704-6.115-8.021-11.957-13.207-16.837c-2.53-2.507-5.343-4.659-8.18-6.723c-2.769-1.897-5.421-4.068-8.186-6.008c-2.761-1.948-5.587-3.783-8.691-5.119c-1.552-0.658-3.182-1.198-4.928-1.393c-1.728-0.2-3.628-0.001-5.268,0.855c-1.633,0.872-2.813,2.278-3.612,3.706c-0.844,1.439-1.241,2.937-1.646,4.404c-0.694,2.958-0.845,5.88-0.635,8.622c0.251,2.737,0.67,5.339,1.409,7.721c0.154,0.604,0.337,1.189,0.553,1.754c0.203,0.569,0.404,1.13,0.601,1.684c0.486,1.076,0.91,2.146,1.413,3.129c2.048,3.924,4.326,6.95,5.977,9.565c0.839,1.301,1.546,2.484,2.136,3.529c0.524,1.073,1.052,1.961,1.347,2.733C100.583,230.531,100.902,231.358,100.902,231.358z'/%3E%3Cpath d='M230.458,209.144c-0.287-7.107,2.491-13.703,3.278-20.783c0.335-3.563,0.208-7.12-0.427-10.585c-0.63-3.456-1.702-6.828-3.39-9.894c-0.446-0.754-0.831-1.54-1.394-2.22c-0.54-0.693-1.007-1.427-1.639-2.055c-1.188-1.289-2.657-2.475-4.466-3.096c-0.892-0.332-1.867-0.439-2.813-0.432c-0.941,0.064-1.875,0.225-2.706,0.559c-1.692,0.624-3.099,1.607-4.334,2.661c-2.458,2.138-4.331,4.578-6.039,6.964c-1.688,2.399-3.169,4.795-4.585,7.063c-0.712,1.134-1.397,2.229-2.119,3.259c-0.704,1.099-1.392,2.172-2.064,3.218c-1.258,2.142-2.395,4.201-3.319,6.21c-1.872,4.001-3.192,7.624-4.057,10.665c-0.476,1.507-0.811,2.878-1.1,4.071c-0.309,1.186-0.53,2.206-0.685,3.038c-0.329,1.658-0.504,2.544-0.504,2.544c1.99-6.876,4.44-13.601,7.826-19.682c1.611-3.082,3.562-5.928,5.504-8.684c2.115-2.828,3.875-5.716,5.784-8.417c1.891-2.701,3.845-5.287,6.052-7.407c2.169-2.111,4.782-3.725,7.244-3.457c2.461,0.293,4.571,2.361,6.129,4.559c1.568,2.212,2.742,4.639,3.559,7.09c0.777,2.458,1.392,4.889,1.648,7.248c0.096,0.586,0.158,1.169,0.186,1.748c0.04,0.578,0.081,1.148,0.121,1.711c-0.014,1.119,0.034,2.209-0.022,3.269c-0.256,4.242-1.055,7.956-1.446,11.054c-0.21,1.546-0.345,2.94-0.426,4.15c-0.011,1.218-0.1,2.247-0.026,3.082C230.378,208.258,230.458,209.144,230.458,209.144z'/%3E%3Cpath d='M149.582,270.878c-0.971,1.251-1.746,2.712-2.125,4.331c-0.384,1.616-0.325,3.383,0.286,5.021c0.082,0.205,0.121,0.419,0.243,0.616l0.376,0.59c0.247,0.424,0.551,0.696,0.84,1.021c0.286,0.333,0.602,0.588,0.915,0.858c0.309,0.278,0.628,0.531,0.956,0.758c1.295,0.958,2.646,1.736,4.021,2.411c1.349,0.706,2.981,1.245,4.563,1.374c1.607,0.131,3.205-0.154,4.587-0.674c2.785-1.073,4.762-2.78,6.553-4.169l0.057-0.044l0.004-0.003c1.355-1.227,3.217-2.186,4.342-3.741c0.234-0.424,0.522-0.783,0.631-1.234c0.068-0.213,0.135-0.422,0.201-0.627c0.041-0.199,0.047-0.389,0.072-0.577c0.037-0.374,0.079-0.73,0.103-1.069c0-0.339,0.001-0.662,0.001-0.969c0.023-0.608-0.07-1.151-0.117-1.616c-0.036-0.467-0.126-0.855-0.212-1.167c-0.158-0.618-0.242-0.946-0.242-0.946c0.004,0.589,0.048,1.162,0.023,1.733c-0.067,0.574-0.068,1.14-0.179,1.698c-0.118,0.555-0.17,1.116-0.344,1.644l-0.217,0.793c-0.072,0.264-0.221,0.443-0.316,0.664c-0.986,1.689-3.153,2.315-5.115,3.796l0.064-0.051c-1.96,1.296-3.816,2.567-5.687,3.305c-1.864,0.754-3.724,0.877-5.501,0.438c-0.862-0.206-1.72-0.547-2.587-0.951c-0.86-0.382-1.682-0.79-2.453-1.213c-1.521-0.836-2.935-1.786-3.715-2.775c-0.75-1.108-1.09-2.447-1.188-3.599c-0.091-1.174,0.091-2.214,0.276-3.054c0.214-0.834,0.428-1.487,0.617-1.91C149.49,271.106,149.582,270.878,149.582,270.878z'/%3E%3Cpath d='M201.4,270.878c0.64,1.45,1.057,2.978,1.124,4.476c0.075,1.492-0.237,2.956-0.879,4.165c-0.583,1.128-1.78,1.927-2.992,2.707c-1.222,0.758-2.527,1.414-3.825,1.987c-1.293,0.607-2.471,0.943-3.711,1.06c-1.218,0.093-2.398-0.091-3.529-0.468c-2.268-0.768-4.293-2.224-6.2-3.448c0.021,0.017,0.042,0.033,0.061,0.047c-0.929-0.696-1.823-1.163-2.611-1.628c-0.799-0.449-1.433-0.922-1.958-1.433c-0.199-0.285-0.483-0.53-0.592-0.838c-0.076-0.148-0.151-0.293-0.225-0.436c-0.06-0.159-0.094-0.338-0.141-0.502c-0.088-0.336-0.173-0.657-0.254-0.964c-0.054-0.317-0.106-0.618-0.155-0.905c-0.125-0.574-0.13-1.094-0.172-1.548c-0.054-0.457-0.043-0.843-0.023-1.157c0.02-0.635,0.03-0.973,0.03-0.973c-0.14,0.559-0.319,1.127-0.422,1.708c-0.061,0.581-0.18,1.173-0.182,1.765c0.005,0.591-0.048,1.188,0.034,1.785l0.088,0.9c0.029,0.3,0.174,0.629,0.266,0.945c0.481,1.262,1.463,2.198,2.385,2.92c0.932,0.731,1.857,1.327,2.561,1.979l0.065,0.051c1.843,1.45,3.736,2.935,6,3.901c2.244,0.996,4.904,1.164,7.103,0.52c1.131-0.311,2.123-0.773,3.001-1.241c0.9-0.462,1.749-0.958,2.55-1.483c1.588-1.073,3.038-2.167,4.028-3.781c0.815-1.607,0.94-3.176,0.854-4.498c-0.108-1.331-0.503-2.397-0.857-3.226c-0.385-0.819-0.735-1.421-1.015-1.801C201.542,271.08,201.4,270.878,201.4,270.878z'/%3E%3C/g%3E%3C/svg%3E");
  background-size: 250px 250px;
  scrollbar-width: thin;
  scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
  position: relative;
}

.message-list::-webkit-scrollbar {
  width: 6px;
}

.message-list::-webkit-scrollbar-track {
  background: transparent;
}

.message-list::-webkit-scrollbar-thumb {
  background-color: rgba(0, 0, 0, 0.2);
  border-radius: 3px;
}

.message-list::-webkit-scrollbar-thumb:hover {
  background-color: rgba(0, 0, 0, 0.3);
}

.message-list-empty {
  text-align: center;
  color: #6b7280;
  padding: 32px;
  font-size: 14px;
}

.message-date-separator {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 16px 0;
  position: relative;
}

.message-date-separator::before,
.message-date-separator::after {
  content: '';
  flex: 1;
  height: 1px;
  background: #e5e7eb;
}

.message-date-separator span {
  padding: 0 12px;
  font-size: 12px;
  color: #6b7280;
  background: #f8f9fa;
  font-weight: 500;
}

.message-item-wrapper {
  display: flex;
  align-items: flex-end;
  gap: 8px;
  max-width: 85%;
  animation: messageSlideIn 0.3s ease-out;
}

.message-item-wrapper.message-own-wrapper {
  align-self: flex-end;
  flex-direction: row-reverse;
}

.message-item-wrapper.message-system-wrapper {
  align-self: center;
  max-width: 100%;
  justify-content: center;
}

.message-item-wrapper.message-grouped {
  margin-top: 2px;
}

.message-item-wrapper.message-grouped:not(.message-system-wrapper) {
  margin-top: 4px;
}

@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(10px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.message-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  font-weight: 600;
  color: white;
  flex-shrink: 0;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: opacity 0.2s ease, transform 0.2s ease;
}

.message-avatar-own {
  order: 2;
}

.message-avatar-hidden {
  opacity: 0;
  width: 0;
  margin: 0;
  overflow: hidden;
}

.message-item {
  position: relative;
  padding: 10px 14px;
  border-radius: 16px;
  background-color: #ffffff;
  border: 1px solid #e5e7eb;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.06);
  transition: box-shadow 0.2s ease, transform 0.1s ease;
}

.message-item:hover {
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06);
}

.message-item.message-own {
  background: linear-gradient(135deg, #2f6df6 0%, #2563eb 100%);
  border-color: transparent;
  color: white;
  box-shadow: 0 2px 8px rgba(47, 109, 246, 0.25);
}

.message-item.message-own:hover {
  box-shadow: 0 4px 12px rgba(47, 109, 246, 0.3);
}

.message-item.message-system {
  align-self: center;
  background-color: #f3f4f6;
  color: #6b7280;
  font-style: italic;
  max-width: 100%;
  border-color: transparent;
  box-shadow: none;
  padding: 8px 12px;
}

.message-header {
  display: flex;
  justify-content: flex-start;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 4px;
  font-size: 12px;
  opacity: 0.85;
  align-items: center;
}

.message-user {
  font-weight: 500;
  margin-right: auto;
}

.message-time {
  font-size: 11px;
  margin-left: auto;
  white-space: nowrap;
  opacity: 0.7;
  cursor: help;
  transition: opacity 0.2s ease;
}

.message-item:hover .message-time {
  opacity: 1;
}

.message-item.message-own .message-time {
  color: rgba(255, 255, 255, 0.85);
}

.message-menu {
  position: relative;
  margin-left: 6px;
  z-index: 5;
}

.message-menu-inline {
  position: absolute;
  top: 4px;
  right: 4px;
  opacity: 0;
  transition: opacity 0.2s ease;
  z-index: 5;
}

.message-item:hover .message-menu-inline {
  opacity: 1;
}

.message-menu-trigger {
  border: 1px solid rgba(148, 163, 184, 0.4);
  background: transparent;
  color: inherit;
  width: 26px;
  height: 22px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.message-menu-dropdown {
  position: absolute;
  right: 0;
  top: 26px;
  background: #fff;
  color: #333;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  box-shadow: 0 10px 24px rgba(15, 23, 42, 0.12);
  min-width: 140px;
  z-index: 20;
  padding: 6px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  animation: dropdownSlideIn 0.2s ease-out;
}

@keyframes dropdownSlideIn {
  from {
    opacity: 0;
    transform: translateY(-8px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.message-menu-item {
  border: none;
  background: transparent;
  text-align: left;
  padding: 8px 10px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 13px;
  color: inherit;
}

.message-menu-item:hover {
  background: #f3f4f6;
}

.message-menu-item.danger {
  color: #dc2626;
}

.message-edit {
  margin-top: 6px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.message-edit-input {
  width: 100%;
  min-height: 80px;
  padding: 8px 10px;
  border-radius: 8px;
  border: 1px solid #d1d5db;
  font-size: 13px;
  resize: vertical;
}

.message-edit-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.message-edit-btn {
  border: 1px solid #d1d5db;
  background: #fff;
  padding: 6px 10px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 12px;
}

.message-edit-btn.primary {
  background: #2f6df6;
  border-color: #2f6df6;
  color: #fff;
}

.message-edit-btn.danger {
  background: #fee2e2;
  border-color: #fecaca;
  color: #b91c1c;
}

.message-text {
  word-wrap: break-word;
  white-space: pre-wrap;
  font-size: 14px;
  line-height: 1.5;
  color: #1f2937;
}

.message-item.message-own .message-text {
  color: white;
}

/* Mobile adaptations */
@media (max-width: 768px) {
  .message-list {
    padding: 12px;
    gap: 6px;
  }

  .message-item-wrapper {
    max-width: 90%;
  }

  .message-avatar {
    width: 32px;
    height: 32px;
    font-size: 12px;
  }

  .message-item {
    padding: 8px 12px;
    font-size: 14px;
  }

  .message-header {
    font-size: 11px;
    margin-bottom: 4px;
  }

  .message-user {
    font-size: 12px;
  }

  .message-time {
    font-size: 10px;
  }

  .message-scroll-button {
    width: 40px;
    height: 40px;
    bottom: 16px;
    right: 16px;
  }

  .message-menu-trigger {
    width: 28px;
    height: 24px;
    font-size: 14px;
  }

  .message-menu-dropdown {
    min-width: 120px;
    font-size: 12px;
  }

  .message-menu-item {
    padding: 10px 12px;
    font-size: 12px;
  }

  .message-date-separator {
    margin: 12px 0;
  }

  .message-date-separator span {
    font-size: 11px;
    padding: 0 10px;
  }
}
