# Результаты тестирования превью конкурса и участника (SEO и дизайн)

Дата проверки: по плану тестирования превью. Автоматические проверки выполняются тестами в `internal/app/http/meta_html_test.go`.

---

## 1. Чек-лист по критериям

### 1.1 SEO и мета-теги

| Критерий | Участник | Конкурс | Комментарий |
|----------|----------|---------|-------------|
| og:title | OK | OK | Есть |
| og:description | OK | OK | Есть |
| og:url | OK | OK | Есть |
| og:image | OK | OK | Есть |
| og:type | OK | OK | Есть |
| og:site_name | OK | OK | Есть |
| og:title до ~60 символов | OK | OK | Обрезка для обоих |
| og:description до ~160 символов | OK | OK | Обрезка для обоих |
| og:locale (ru_RU) | OK | OK | Выводится для обоих |
| og:image:alt / twitter:image:alt | OK | OK | Выводится для обоих |
| og:image:width, og:image:height | для дефолта OK | для дефолта OK | Для дефолтного изображения 1200×630 |
| og:image:secure_url | для HTTPS OK | для HTTPS OK | Выводится при baseURL https |
| twitter:card, title, description, image | OK | OK | Есть |
| Канонический URL (link rel=canonical) | OK | OK | Выводится для обоих |

### 1.2 Изображение превью

| Критерий | Участник | Конкурс |
|----------|----------|---------|
| Рекомендуемый размер 1200×630 | не контролируется | не контролируется |
| Формат (JPG/PNG/WebP/GIF) | URL от хранилища | Дефолт: og-default.png (PNG) |

### 1.3 Дизайн при открытии ссылки

| Критерий | Участник | Конкурс |
|----------|----------|---------|
| Наличие блока #og-preview | OK | OK |
| Карточка: фото + заголовок + описание | OK | OK |

---

## 2. Статус недостатков (после доработок по плану)

Реализованы задачи 1.1–1.3, 2.1, 2.2, 3.1 из [PREVIEW_IMPROVEMENT_PLAN.md](PREVIEW_IMPROVEMENT_PLAN.md).

### 2.1 Конкурс — исправлено

- **og:title / og:description** — обрезка до 60/160 символов (contestDescription, truncateRunes).
- **og:locale / og:image:alt** — выводятся (ru_RU, «Превью конкурса: » + название).
- **Превью-блок** — карточка с фото, заголовком и описанием (injectContestPreviewCard).
- **Дефолтное изображение** — `og-default.png` (PNG) вместо icon.svg.

### 2.2 Участник — частично

- **og:image:width / height / secure_url** — выводятся для дефолтного изображения (участник без фото). Для пользовательских фото размеры по-прежнему не задаются (отдельная задача — генерация превью 1200×630).

### 2.3 Общее — исправлено

- **Канонический URL** — выводится `<link rel="canonical">` для конкурса и участника.

---

## 3. Ручная проверка (рекомендуемые шаги)

### 3.1 Подготовка

- Запустить сервер с заданными `SPA_INDEX_PATH` и `BASE_URL`.
- Иметь рабочие URL страницы конкурса и участника (например, на проде или локально с туннелем).

### 3.2 Валидаторы и превью в соцсетях

- **Facebook:** [Sharing Debugger](https://developers.facebook.com/tools/debug/) — вставить URL конкурса и участника; проверить предупреждения и отображаемое превью.
- **Telegram / VK / WhatsApp:** отправить ссылки в чат и проверить карточку (заголовок, описание, картинка).
- **Twitter/X:** при необходимости — Card Validator или ручная проверка по шарингу.
- Зафиксировать: обрезается ли текст, подставляется ли картинка, есть ли ошибки (в т.ч. из-за SVG).

### 3.3 Дизайн при открытии ссылки

- Открыть оба URL в браузере (десктоп и мобильный вид).
- Участник: читаемость карточки (фото, заголовок, описание), контраст.
- Конкурс: карточка с заголовком и описанием (после доработок).

---

## 4. Рекомендации (оставшиеся)

- **Генерация превью 1200×630** для пользовательских фото (отдельная задача): превью-копия в хранилище и использование в og:image с width/height.
- При необходимости заменить `client/public/og-default.png` на изображение 1200×630 для лучшего отображения в соцсетях.
